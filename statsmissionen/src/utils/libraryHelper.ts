import { type ClassValue, clsx } from 'clsx'
import { twMerge } from 'tailwind-merge'

export function cn(...inputs: ClassValue[]) {
  return twMerge(clsx(inputs))
}

// Utility to filter out undefined values for exactOptionalPropertyTypes compatibility
export function filterUndefined<T extends Record<string, unknown>>(obj: T): Record<string, unknown> {
  const result: Record<string, unknown> = {}
  for (const [key, value] of Object.entries(obj)) {
    if (value !== undefined && value !== null) {
      result[key] = value
    }
  }
  return result
}

// Utility specifically for UI component props that need to be compatible with exactOptionalPropertyTypes
export function cleanUIProps<T extends Record<string, unknown>>(props: T): Record<string, unknown> {
  const cleaned: Record<string, unknown> = {}
  for (const [key, value] of Object.entries(props)) {
    // Only include properties that have defined values
    if (value !== undefined && value !== null) {
      cleaned[key] = value
    }
  }
  return cleaned
}
